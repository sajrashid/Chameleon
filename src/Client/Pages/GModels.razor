@page "/gModels"
@using Chameleon.Shared
@inject HttpClient Http

<h1>GLB Models</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (glbModels == null)
{
    <p><em>Loading...</em></p>
}
else
{
   
            @foreach (var modelitem in glbModels)
            {
                <div>
                    <div>@modelitem.Name</div>
                    <div>
                        <model-viewer src="@modelitem.Src"
                        alt="A 3D model of an astronaut" 
                        ar ar-modes="webxr scene-viewer quick-look" 
                        environment-image="neutral" 
                        auto-rotate camera-controls>
                        </model-viewer>
                    </div>
               </div>
            }
} 

@code {
    private GlbModel[] glbModels;

    protected override async Task OnInitializedAsync()
    {
        glbModels = await Http.GetFromJsonAsync<GlbModel[]>("/api/GlbModels");
    }

}